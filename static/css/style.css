/* ====== THEME VARIABLES ====== */
:root {
    --bg-main: #f3fff6;
    --bg-card: #ffffff;
    --bg-card-grad: radial-gradient(circle at 0% 0%, rgba(165,214,167,0.18) 0%, rgba(255,255,255,0) 60%);
    --text-main: #1b5e20;
    --text-dim: #2e7d32;
    --border-soft: #c8e6c9;
    --border-strong: #2e7d32;
    --accent-grad: linear-gradient(90deg,#2e7d32,#43a047);
    --shadow-card: 0 24px 60px rgba(0,0,0,.07);
    --shadow-soft: 0 16px 32px rgba(0,0,0,.08);
    --sidebar-bg: radial-gradient(circle at 20% 20%, #1b5e20 0%, #104417 70%);
    --sidebar-text: #e8f5e9;
    --sidebar-muted: rgba(255,255,255,0.5);
    --sidebar-active-bg: rgba(255,255,255,0.08);
    --danger: #c62828;
    --danger-bg: #ffebee;
}

html[data-theme="dark"] {
    --bg-main: #0f1f12;
    --bg-card: #162516;
    --bg-card-grad: radial-gradient(circle at 0% 0%, rgba(76,175,80,0.12) 0%, rgba(0,0,0,0) 60%);
    --text-main: #d6ffd9;
    --text-dim: #9ed3a1;
    --border-soft: #2e7d32;
    --border-strong: #81c784;
    --accent-grad: linear-gradient(90deg,#1b5e20,#43a047);
    --shadow-card: 0 24px 60px rgba(0,0,0,.9);
    --shadow-soft: 0 16px 32px rgba(0,0,0,.8);
    --sidebar-bg: radial-gradient(circle at 20% 20%, #0d2a10 0%, #000 70%);
    --sidebar-text: #e8f5e9;
    --sidebar-muted: rgba(255,255,255,0.4);
    --sidebar-active-bg: rgba(255,255,255,0.07);
    --danger: #ef5350;
    --danger-bg: rgba(239,83,80,.1);
}

/* ====== BASE LAYOUT ====== */

body {
    font-family: 'Poppins','Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    background: var(--bg-main);
    color: var(--text-main);
    display:flex;
    min-height:100vh;
    margin:0;
}

.app-shell {
    width:100%;
    display:flex;
}

.auth-shell {
    min-height:100vh;
    background: var(--bg-main);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    color: var(--text-main);
    padding:2rem 1rem;
}

/* ====== SIDEBAR ====== */
.sidebar {
    background: var(--sidebar-bg);
    color: var(--sidebar-text);
    min-width:250px;
    max-width:250px;
    display:flex;
    flex-direction:column;
    box-shadow: var(--shadow-soft);
    border-right:1px solid rgba(255,255,255,0.07);
    transition:all .2s;
}
body.sidebar-collapsed .sidebar {
    max-width:70px;
    min-width:70px;
}
body.sidebar-collapsed .side-txt,
body.sidebar-collapsed .logo-texts,
body.sidebar-collapsed .sidebar-support-card,
body.sidebar-collapsed .sidebar-footer .build-label {
    display:none;
}

.sidebar-inner {
    display:flex;
    flex-direction:column;
    height:100vh;
    padding:1rem;
    gap:1rem;
}

.sidebar-header {
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:.75rem;
}
.logo-block {
    display:flex;
    align-items:flex-start;
    gap:.6rem;
}
.sidebar-logo {
    width:40px;
    height:40px;
    border-radius:.6rem;
    box-shadow:0 12px 30px rgba(0,0,0,.6),0 0 20px rgba(255,255,255,.25) inset;
}
.logo-texts {
    line-height:1.2;
    color: var(--sidebar-text);
}
.logo-name {
    font-size:.9rem;
    font-weight:600;
}
.logo-tagline {
    font-size:.7rem;
    color: var(--sidebar-muted);
    font-weight:500;
}
.sidebar-collapse-btn {
    border:0;
    background: var(--sidebar-active-bg);
    color:#fff;
    border-radius:.5rem;
    padding:.5rem .6rem;
    cursor:pointer;
    line-height:1;
    box-shadow:0 15px 40px rgba(0,0,0,.7);
}

.sidebar-nav {
    display:flex;
    flex-direction:column;
    gap:.4rem;
    margin-top:.5rem;
    flex:1;
}
.side-link {
    display:flex;
    align-items:center;
    gap:.6rem;
    text-decoration:none;
    background: transparent;
    color: var(--sidebar-text);
    font-size:.8rem;
    font-weight:500;
    padding:.6rem .7rem;
    border-radius:.6rem;
    line-height:1.2;
    border:1px solid transparent;
    transition:all .15s;
}
.side-link:hover {
    background: var(--sidebar-active-bg);
    border:1px solid rgba(255,255,255,0.15);
    box-shadow:0 18px 40px rgba(0,0,0,.7);
}
.side-ic {
    width:1.4rem;
    text-align:center;
    font-size:.9rem;
}

.sidebar-support-card {
    background:rgba(255,255,255,0.07);
    border:1px solid rgba(255,255,255,0.15);
    border-radius:.8rem;
    padding:.75rem;
    font-size:.75rem;
    box-shadow:0 20px 50px rgba(0,0,0,.7);
}
.support-title {
    font-weight:600;
    color:#fff;
}
.support-desc {
    color: var(--sidebar-muted);
    line-height:1.4;
    margin:.4rem 0 .6rem;
    font-size:.7rem;
}
.support-qr {
    background:#fff;
    border-radius:.5rem;
    width:80px;
    height:80px;
    box-shadow:0 20px 40px rgba(0,0,0,.8);
    display:flex;
    justify-content:center;
    align-items:center;
    margin-bottom:.5rem;
}
.fake-qr {
    width:50px;height:50px;
    background:#000;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    grid-template-rows:repeat(2,1fr);
    gap:4px;
}
.fake-qr div { background:#fff; }
.support-small {
    font-size:.7rem;
    color:#fff;
    text-align:center;
    font-weight:500;
}

.sidebar-footer {
    margin-top:auto;
    display:flex;
    flex-direction:column;
    gap:.5rem;
}
.logout-btn {
    background:rgba(255,255,255,.07);
    border:1px solid rgba(255,255,255,.2);
    border-radius:.6rem;
    padding:.6rem .7rem;
    font-size:.8rem;
    text-decoration:none;
    color:#fff;
    font-weight:500;
    box-shadow:0 20px 40px rgba(0,0,0,.8);
    text-align:center;
}
.logout-btn:hover {
    background:rgba(255,255,255,.15);
}
.build-label {
    font-size:.6rem;
    line-height:1.3;
    color: var(--sidebar-muted);
    text-align:left;
}

/* ====== MAIN AREA / TOPBAR / PAGE BODY ====== */

.main-area {
    flex:1;
    min-width:0;
    display:flex;
    flex-direction:column;
    background: var(--bg-main);
}

.topbar {
    background: var(--bg-card);
    background-image: var(--bg-card-grad);
    border-bottom:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
    padding:1rem 1.25rem;
}
.topbar-inner {
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    align-items:flex-start;
    gap:.75rem;
}
.topbar-left {
    max-width:70%;
}
.topbar-title {
    font-size:1rem;
    font-weight:600;
    color: var(--text-main);
}
.topbar-sub {
    font-size:.75rem;
    font-weight:500;
    color: var(--text-dim);
}
.topbar-right {
    display:flex;
    align-items:center;
    gap:.5rem;
}

.page-body {
    flex:1;
    padding:1.25rem;
}

/* ====== BUTTONS / CTA / CHIPS ====== */

.primary-cta {
    background: var(--accent-grad);
    color:#fff;
    text-decoration:none;
    border:0;
    border-radius:.7rem;
    font-size:.8rem;
    font-weight:600;
    padding:.6rem .9rem;
    cursor:pointer;
    box-shadow:0 20px 40px rgba(0,0,0,.2),0 0 20px rgba(255,255,255,.4) inset;
    text-align:center;
    display:inline-block;
}
.primary-cta.wide {
    width:100%;
    text-align:center;
}

.ghost-btn {
    background:transparent;
    color: var(--text-main);
    border:1px solid var(--border-soft);
    border-radius:.7rem;
    font-size:.8rem;
    font-weight:500;
    line-height:1.2;
    padding:.6rem .75rem;
    text-decoration:none;
    cursor:pointer;
    box-shadow: var(--shadow-soft);
}
.ghost-btn.small {
    padding:.4rem .6rem;
    font-size:.75rem;
}
.ghost-btn.wide {
    display:block;
    width:100%;
    text-align:center;
}

.danger-btn {
    background: var(--danger-bg);
    color: var(--danger);
    border:1px solid var(--danger);
    border-radius:.6rem;
    font-size:.75rem;
    font-weight:600;
    padding:.5rem .7rem;
    cursor:pointer;
    box-shadow: var(--shadow-soft);
}
.danger-btn.small {
    padding:.4rem .6rem;
}

/* ====== CARDS / PANELS ====== */

.panel-card {
    background: var(--bg-card);
    background-image: var(--bg-card-grad);
    border-radius:1rem;
    box-shadow: var(--shadow-card);
    border:1px solid var(--border-soft);
    padding:1rem 1.25rem;
    display:flex;
    flex-direction:column;
    gap:1rem;
}
.panel-head {
    display:flex;
    flex-direction:column;
    gap:.2rem;
}
.panel-title {
    font-size:.9rem;
    font-weight:600;
    color: var(--text-main);
}
.panel-sub {
    font-size:.7rem;
    font-weight:500;
    color: var(--text-dim);
}

/* KPI CARDS */
.kpi-card {
    background: var(--bg-card);
    background-image: var(--bg-card-grad);
    border-radius:1rem;
    box-shadow: var(--shadow-card);
    border:1px solid var(--border-soft);
    padding:1rem;
}
.kpi-label {
    font-size:.7rem;
    font-weight:500;
    color: var(--text-dim);
}
.kpi-value {
    font-size:1.2rem;
    line-height:1.2;
    font-weight:600;
    color: var(--text-main);
    margin-top:.4rem;
}
.kpi-hint {
    color: var(--text-dim);
    font-size:.7rem;
    margin-top:.4rem;
}

/* LISTS / BLOCKS */
.empty-block {
    font-size:.8rem;
    font-weight:500;
    color: var(--text-dim);
    background: rgba(0,0,0,.03);
    border-radius:.6rem;
    padding:1rem;
    text-align:center;
}
.recent-list {
    list-style:none;
    margin:0;padding:0;
    display:flex;
    flex-direction:column;
    gap:.75rem;
}
.recent-item {
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:rgba(0,0,0,.03);
    border-radius:.7rem;
    padding:.75rem 1rem;
    border:1px solid var(--border-soft);
}
.recent-item.small {
    font-size:.75rem;
}
.recent-main {
    display:flex;
    flex-direction:column;
}
.recent-pred {
    font-size:.8rem;
    font-weight:600;
    color: var(--text-main);
}
.recent-meta {
    font-size:.7rem;
    color: var(--text-dim);
}
.recent-thumb {
    width:48px;
    height:48px;
    border-radius:.6rem;
    background:#fff;
    border:1px solid var(--border-soft);
    overflow:hidden;
    flex-shrink:0;
    display:flex;
    align-items:center;
    justify-content:center;
}
.recent-thumb img {
    width:100%;height:100%;object-fit:cover;
}

/* Tips carousel */
.tips-carousel {
    display:flex;
    flex-direction:column;
    gap:.5rem;
    font-size:.8rem;
    color: var(--text-main);
}
.tip-slide {
    background:rgba(0,0,0,.03);
    border:1px solid var(--border-soft);
    border-radius:.6rem;
    box-shadow: var(--shadow-soft);
    padding:.6rem .75rem;
    line-height:1.4;
}

/* Diagnose */
.diagnose-layout {
    display:grid;
    grid-template-columns:1fr;
    gap:1.25rem;
}
@media(min-width:900px){
    .diagnose-layout {
        grid-template-columns:1fr 1fr;
    }
}
.upload-block {
    display:flex;
    flex-direction:column;
    gap:1rem;
}
.file-label-title {
    font-size:.8rem;
    font-weight:600;
    color: var(--text-main);
    background:rgba(0,0,0,.05);
    border:1px solid var(--border-soft);
    border-radius:.6rem;
    padding:.5rem .75rem;
    width:fit-content;
    box-shadow: var(--shadow-soft);
}
.file-input {
    font-size:.8rem;
    background:#fff;
    border:1px solid var(--border-soft);
    border-radius:.6rem;
    padding:.6rem .75rem;
    cursor:pointer;
    color: var(--text-main);
}
.success-msg {
    font-size:.8rem;
    font-weight:600;
    color: var(--text-main);
    background:#c8e6c9;
    border-left:4px solid #2e7d32;
    border-radius:.6rem;
    padding:.6rem .75rem;
    box-shadow: var(--shadow-soft);
}
.result-card .leaf-preview {
    border-radius:.7rem;
    overflow:hidden;
    max-height:220px;
    border:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
    background:#fff;
}
.result-card .leaf-preview img {
    width: 100%;
    height: auto;
    max-height: 350px;      /* ✅ limits the tall size */
    object-fit: contain;    /* ✅ keeps proportions nicely */
    border-radius: 0.8rem;
    box-shadow: 0 0 15px rgba(0,0,0,0.4);
    display: block;
}

.result-lines {
    font-size:.8rem;
    color: var(--text-main);
    line-height:1.4;
}
.result-row { margin-bottom:.4rem; }
.conf-bar-wrap {
    display:flex;
    flex-direction:column;
    gap:.4rem;
}
.conf-bar {
    width:100%;
    background:rgba(0,0,0,.07);
    border-radius:999px;
    overflow:hidden;
    border:1px solid var(--border-soft);
    height:.6rem;
    box-shadow: var(--shadow-soft);
}
.conf-fill {
    background: var(--accent-grad);
    height:100%;
    border-radius:999px;
    box-shadow:0 10px 30px rgba(0,0,0,.4);
}
.conf-label {
    font-size:.7rem;
    font-weight:500;
    color: var(--text-dim);
}
.advice-box {
    background:rgba(0,0,0,.03);
    border:1px solid var(--border-soft);
    border-radius:.6rem;
    padding:.75rem;
    box-shadow: var(--shadow-soft);
}
.advice-head {
    font-size:.8rem;
    font-weight:600;
    color: var(--text-main);
    margin-bottom:.4rem;
}
.advice-text {
    font-size:.8rem;
    line-height:1.4;
    color: var(--text-dim);
}
.placeholder-card {
    text-align:center;
}
.placeholder-icon {
    font-size:2rem;
}
.placeholder-text {
    font-size:.8rem;
    color: var(--text-main);
    line-height:1.4;
}

/* History rows */
.history-list {
    display:flex;
    flex-direction:column;
    gap:.75rem;
}
.history-row {
    display:grid;
    grid-template-columns:64px 1fr auto;
    gap:.75rem;
    background:rgba(0,0,0,.03);
    border-radius:.7rem;
    padding:.75rem 1rem;
    border:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
}
.history-thumb {
    width:64px;
    height:64px;
    border-radius:.6rem;
    background:#fff;
    border:1px solid var(--border-soft);
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
}
.history-thumb img {
    width:100%;height:100%;object-fit:cover;
}
.history-info {
    font-size:.8rem;
    line-height:1.4;
    color: var(--text-main);
}
.history-actions {
    display:flex;
    flex-direction:column;
    gap:.5rem;
    align-items:flex-end;
}
.history-bottom {
    margin-top:1rem;
    text-align:center;
}

/* Analysis */
.analysis-grid {
    display:grid;
    grid-template-columns:1fr;
    gap:1.25rem;
}
@media(min-width:900px){
    .analysis-grid {
        grid-template-columns:1fr 1fr;
    }
}
.stat-list {
    list-style:none;
    margin:0;padding:0;
    font-size:.8rem;
    line-height:1.5;
    color: var(--text-main);
}
.freq-list {
    list-style:none;
    margin:0;padding:0;
}
.freq-row {
    display:flex;
    align-items:center;
    justify-content:space-between;
    background:rgba(0,0,0,.03);
    border-radius:.6rem;
    padding:.6rem .75rem;
    border:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
    font-size:.8rem;
    color: var(--text-main);
    margin-bottom:.5rem;
}
.freq-label { font-weight:600; }

/* About */
.about-grid {
    display:grid;
    grid-template-columns:1fr;
    gap:1.25rem;
}
.about-text {
    font-size:.8rem;
    line-height:1.5;
    color: var(--text-main);
    background:rgba(0,0,0,.03);
    padding:.75rem 1rem;
    border-radius:.6rem;
    border:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
}
.team-list {
    list-style:none;
    margin:0;padding:0;
    display:flex;
    flex-direction:column;
    gap:.6rem;
}
.team-item {
    background:rgba(0,0,0,.03);
    border:1px solid var(--border-soft);
    border-radius:.6rem;
    padding:.6rem .75rem;
    box-shadow: var(--shadow-soft);
    font-size:.8rem;
    color: var(--text-main);
}
.team-name {
    font-weight:600;
    font-size:.8rem;
    color: var(--text-main);
}
.team-role {
    font-size:.75rem;
    color: var(--text-dim);
}

/* Settings */
.settings-grid {
    display:grid;
    grid-template-columns:1fr;
    gap:1.25rem;
}
.settings-block {
    font-size:.8rem;
    line-height:1.5;
    color: var(--text-main);
}
.settings-hint {
    font-size:.7rem;
    color: var(--text-dim);
    margin-top:.5rem;
}

/* Admin */
.admin-grid {
    display:grid;
    grid-template-columns:1fr;
    gap:1.25rem;
}
.admin-export-row {
    margin-top:1rem;
}

/* AUTH PAGES (login/signup/error) */
.auth-card {
    background: var(--bg-card);
    background-image: var(--bg-card-grad);
    border-radius:1rem;
    box-shadow: var(--shadow-card);
    border:1px solid var(--border-soft);
    padding:1.5rem;
    width:100%;
    max-width:380px;
}
.auth-logo-row {
    display:flex;
    align-items:center;
    gap:.75rem;
    margin-bottom:1rem;
}
.auth-logo {
    width:44px;
    height:44px;
    border-radius:.6rem;
    background:#fff;
    border:1px solid var(--border-soft);
    box-shadow: var(--shadow-soft);
}
.auth-brand {
    line-height:1.2;
}
.auth-name {
    font-size:.9rem;
    font-weight:600;
    color: var(--text-main);
}
.auth-sub {
    font-size:.7rem;
    color: var(--text-dim);
    font-weight:500;
}
.auth-heading {
    font-size:1rem;
    font-weight:600;
    color: var(--text-main);
    margin-bottom:.4rem;
}
.auth-desc {
    font-size:.8rem;
    color: var(--text-dim);
    line-height:1.4;
    margin-bottom:1rem;
}
.auth-error {
    background: var(--danger-bg);
    color: var(--danger);
    border:1px solid var(--danger);
    border-radius:.6rem;
    padding:.6rem .75rem;
    font-size:.75rem;
    font-weight:500;
    line-height:1.4;
    margin-bottom:1rem;
}
.auth-form {
    display:flex;
    flex-direction:column;
    gap:1rem;
}
.auth-label {
    font-size:.8rem;
    font-weight:600;
    color: var(--text-main);
    display:flex;
    flex-direction:column;
    gap:.4rem;
}
.auth-input {
    border-radius:.6rem;
    border:1px solid var(--border-soft);
    background:#fff;
    box-shadow: var(--shadow-soft);
    padding:.6rem .75rem;
    font-size:.8rem;
    color:#000;
}
.auth-switch {
    font-size:.75rem;
    margin-top:1rem;
    color: var(--text-dim);
    text-align:center;
}
.auth-switch a {
    font-weight:600;
    color: var(--text-main);
    text-decoration:none;
}
.auth-footer {
    margin-top:2rem;
    font-size:.7rem;
    line-height:1.4;
    color: var(--text-dim);
    text-align:center;
}
.auth-footer a {
    color: var(--text-main);
    text-decoration:none;
    font-weight:600;
}

/* ====== RESPONSIVE ====== */

@media(max-width:800px){
    .topbar-left{max-width:100%;}
    body.sidebar-collapsed .sidebar{max-width:0;min-width:0;padding:0;border-right:0;}
    body.sidebar-collapsed .sidebar-inner{display:none;}
    .sidebar-collapse-btn{display:none;}
}

/* ====== ANIMATIONS ====== */

.fade-in-up {
    animation: fadeInUp .4s ease both;
}
@keyframes fadeInUp {
    0% { opacity:0; transform: translateY(10px); }
    100% { opacity:1; transform: translateY(0); }
}

/* ====== GRID LAYOUT HELPERS ====== */

/* dashboard */
.grid-dashboard {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:1.25rem;
}

/* panels on diagnose */
.diagnose-left,
.diagnose-right { display:flex; flex-direction:column; gap:1.25rem; }

/* Fix Start Diagnosis alignment */
.panel-cta {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;  /* centers horizontally */
    text-align: center;
}

.panel-cta .cta-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-main);
    margin-bottom: 0.4rem;
}

.panel-cta .cta-desc {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-bottom: 1rem;
}

.panel-cta .primary-cta {
    width: auto;
    min-width: 180px;
    padding: 0.7rem 1.4rem;
    text-align: center;
    border-radius: 10px;
    background: var(--accent-grad);
    transition: all 0.25s ease;
}

.panel-cta .primary-cta:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(67, 160, 71, 0.5);
}
.sidebar-support-card .ghost-btn:hover {
    background: linear-gradient(90deg, #2e7d32, #43a047);
    color: #fff;
    box-shadow: 0 0 15px rgba(67, 160, 71, 0.5);
}
/* ---- Support Card Fixes ---- */
.sidebar-support-card {
    background: rgba(255, 255, 255, 0.07);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 0.8rem;
    padding: 1rem;
    font-size: 0.8rem;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.support-qr {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0.6rem auto;
}

.support-qr-img {
    width: 90px;
    height: 90px;
    border-radius: 0.6rem;
    object-fit: cover;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
}

.sidebar-support-card .ghost-btn {
    display: inline-block;
    width: 100%;
    background: transparent;
    border: 1px solid #43a047;
    color: #43a047;
    font-weight: 600;
    border-radius: 10px;
    padding: 0.5rem;
    text-align: center;
    margin-top: 0.6rem;
    transition: all 0.3s ease;
}

.sidebar-support-card .ghost-btn:hover {
    background: linear-gradient(90deg, #2e7d32, #43a047);
    color: #fff;
    box-shadow: 0 0 15px rgba(67, 160, 71, 0.5);
}

/* ====== END ====== */
